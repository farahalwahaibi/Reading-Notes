## **OAuth 2 Simplified**

### **What is OAuth ?**
*is an open standard for access delegation, commonly used as a way for Internet users to grant websites or applications access to their information on other websites but without giving them the passwords.*

* Generally, OAuth provides clients a "secure delegated access" to server resources on behalf of a resource owner. It specifies a process for resource owners to authorize third-party access to their server resources without providing credentials. 

* OAuth essentially allows access tokens to be issued to third-party clients by an authorization server, with the approval of the resource owner. 

### **Roles :**

* **The Third-Party Application: "Client"**
  * to get permission from the user before it can do so.

* **The API: "Resource Server"**
  * to access the user's information

* **The Authorization Server**
  * the server that presents the interface where the user approves or denies the request.

* **The User: "Resource Owner"**
  * person who is giving access to some portion of their account.


### **Creating an App :**
*Before you can begin the OAuth process, you must first register a new app with the service.*

* **Redirect URIs**
  * This helps prevent tokens from being intercepted during the authorization process.

* **Client ID and Secret**
  * The client ID is considered public information, and is used to build login URLs.
  * The client secret must be kept confidential. 


### **Authorization :**
*OAuth 2 provides several "grant types" for different use cases. The grant types defined are:*

* **Authorization Code**
  * for apps running on a web server, browser-based and mobile apps

* **Password**
  * for logging in with a username and password (only for first-party apps)

* **Client credentials**
  * for application access without a user present

* **Implicit**
  * for clients without a secret, but has been superseded by using the Authorization Code grant with PKCE.

### **Web Server Apps :**
*Web server apps are the most common type of application you encounter when dealing with OAuth servers. Web apps are written in a server-side language and run on a server where the source code of the application is not available to the public. This means the application is able to use its client secret when communicating with the authorization server, which can help avoid many attack vectors.*

* **Authorization**
  * response_type=code - Indicates that your server expects to receive an authorization code
  * client_id - The client ID you received when you first created the application
  * redirect_uri - Indicates the URI to return the user to after authorization is complete
  * scope - One or more scope values indicating which parts of the user's account you wish to access
  * state - A random string generated by your application, which you'll verify later
 

* **Getting an Access Token**
  * grant_type=authorization_code - The grant type for this flow is authorization_code
  * code=AUTH_CODE_HERE - This is the code you received in the query string
  * redirect_uri=REDIRECT_URI - Must be identical to the redirect URI provided in the original link
  * client_id=CLIENT_ID - The client ID you received when you first created the application
  * client_secret=CLIENT_SECRET - Since this request is made from server-side code, the secret is included


### **Single-Page Apps :**
*Single-page apps (or browser-based apps) run entirely in the browser after loading the source code from a web page. Since the entire source code is available to the browser, they cannot maintain the confidentiality of a client secret, so the secret is not used in this case. *

* **Authorization**
  * response_type=code - Indicates that your server expects to receive an authorization code
  * client_id - The client ID you received when you first created the application
  * redirect_uri - Indicates the URI to return the user to after authorization is complete
  * scope - One or more scope values indicating which parts of the user's account you wish to access
  * state - A random string generated by your application, which you'll verify later
  * code_challenge - The URL-safe base64-encoded SHA256 hash of the secret
  * code_challenge_method=S256 - Indicate which hashing method you used (S256)

* **Getting an Access Token**
  * grant_type=authorization_code - The grant type for this flow is authorization_code
  * code=AUTH_CODE_HERE - This is the code you received in the query string
  * redirect_uri=REDIRECT_URI - Must be identical to the redirect URI provided in the original link
  * client_id=CLIENT_ID - The client ID you received when you first created the application
  * code_verifier=CODE_VERIFIER - The random secret you generated at the beginning


### **Mobile Apps :**
*Like browser-based apps, mobile apps also cannot maintain the confidentiality of a client secret. Because of this, mobile apps also use the PKCE flow which does not require a client secret.*

* **Authorization**


 1. **Using the Service's Native App**
  * response_type=code - indicates that your server expects to receive an authorization code
  * client_id=CLIENT_ID - The client ID you received when you first created the application
  * redirect_uri=REDIRECT_URI - Indicates the URI to return the user to after authorization is complete, such as fb00000000://authorize
  * scope=email - One or more scope values indicating which parts of the user's account you wish to access
  * state=1234zyx - A random string generated by your application, which you'll verify later

2. **Using a Web Browser**
  * response_type=code - indicates that your server expects to receive an authorization code
  * client_id=CLIENT_ID - The client ID you received when you first created the application
  * redirect_uri=REDIRECT_URI - Indicates the URI to return the user to after authorization is complete, such as fb00000000://authorize
  * scope=email - One or more scope values indicating which parts of the user's account you wish to access
  * state=1234zyx - A random string generated by your application, which you'll verify later


* **Getting an Access Token**

  * grant_type=authorization_code - The grant type for this flow is authorization_code
  * code=AUTH_CODE_HERE - This is the code you received in the query string
  * redirect_uri=REDIRECT_URI - Must be identical to the redirect URI provided in the original link
  * client_id=CLIENT_ID - The client ID you received when you first created the application
  * code_verifier=VERIFIER_STRING - The plaintext string that you previously hashed to create the code_challenge


***
***
***
[BACK TO MAIN PAGE](https://github.com/farahalwahaibi/Reading-Notes/blob/main/README.md)
